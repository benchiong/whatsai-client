(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{4459:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/card-detail/[cardName]",function(){return n(5032)}])},9195:function(e,t,n){"use strict";function o(e){var t;let n=e.civit_model;if(!n)return e.file_name;let o=null===(t=n.model)||void 0===t?void 0:t.name,r=n.name;return o?"".concat(o," - ").concat(r):"".concat(r)}function r(e){let t=e.civit_model,n=null==t?void 0:t.modelId,o=null==t?void 0:t.id;return n&&o?"https://civitai.com/models/".concat(n,"?modelVersionId=").concat(o):n?"https://civitai.com/models/".concat(n):null}n.d(t,{eK:function(){return o},uZ:function(){return r},z1:function(){return i}});let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e<1048576?"".concat((e/1024).toFixed(t),"MB"):"".concat((e/1024/1024).toFixed(t),"GB")}},5032:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ez}});var o=n(4246),r=n(7040),i=n(1487),l=n(4022),a=n(6677),s=n(8038),c=n.n(s),d=n(7378),h=n(8437),x=n(7394),u=n(5405),p=n(149),g=n(2220),m=n(603),f=n(6030),j=n(5065),w=n(453),y=n(9528),v=n(9266),b=n(6270),k=n(401),C=n(1835);function S(e){let{onClick:t,width:n=24,height:i=24,text:a="Refresh models"}=e,s=(0,r.rZ)(),[c,h]=(0,d.useState)(!1);return(0,o.jsx)(k.u,{label:a,zIndex:500,radius:5,bg:s.colors.waLight[6],color:s.colors.waLight[9],style:{fontSize:"12px"},children:(0,o.jsx)(l.M,{w:n,h:i,children:c?(0,o.jsx)(C.a,{color:s.colors.primary[0],size:"12px"}):(0,o.jsx)(b.Z,{style:{color:"var(--mantine-color-primary-3)",cursor:"pointer",height:"".concat(i-6,"px"),width:"".concat(n-6,"px"),strokeWidth:"1px"},onClick:e=>{e.stopPropagation(),h(!0),t(),setTimeout(()=>{h(!1)},500)}})})})}function _(e){let{onClick:t,width:n=24,height:r=24}=e;return(0,o.jsx)(h.Z,{style:{color:"var(--mantine-color-waLight-9)",cursor:"pointer",height:"".concat(r,"px"),width:"".concat(n,"px"),strokeWidth:"1px"},onClick:e=>{e.stopPropagation(),t()}})}var Z=n(3271),z=n(531),M=n(9894),L=n.n(M),W=n(9195);function I(e){var t,n,a,s,c,d,x,g;let{children:m,model:f,close:w,opened:y=!1}=e,v=(0,r.rZ)();return(0,o.jsxs)(j.J,{width:420,shadow:"md",radius:"sm",position:"right",withArrow:!0,opened:y,zIndex:490,children:[(0,o.jsx)(j.J.Target,{children:m}),(0,o.jsx)(j.J.Dropdown,{children:(0,o.jsxs)(u.K,{style:{position:"relative"},mih:200,justify:"center",children:[(0,o.jsxs)(u.K,{gap:5,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:[(null===(n=f.civit_model)||void 0===n?void 0:null===(t=n.model)||void 0===t?void 0:t.name)&&(0,o.jsx)(p.x,{c:v.colors.waLight[8],style:{fontSize:"12px",fontWeight:"500",wordBreak:"break-all"},children:"Model Name:   ".concat(null===(s=f.civit_model)||void 0===s?void 0:null===(a=s.model)||void 0===a?void 0:a.name)}),(null===(c=f.civit_model)||void 0===c?void 0:c.name)&&(0,o.jsx)(p.x,{c:v.colors.waLight[8],style:{fontSize:"12px",fontWeight:"500",wordBreak:"break-all"},children:"Version Name:   ".concat(null===(d=f.civit_model)||void 0===d?void 0:d.name)}),(null===(x=f.civit_model)||void 0===x?void 0:x.baseModel)&&(0,o.jsx)(p.x,{c:v.colors.waLight[8],style:{fontSize:"12px",fontWeight:"500"},children:"Base Model:   ".concat(null===(g=f.civit_model)||void 0===g?void 0:g.baseModel)}),f.file_name&&(0,o.jsx)(p.x,{c:v.colors.waLight[8],style:{fontSize:"12px",fontWeight:"500",wordBreak:"break-all"},children:"File Name:   ".concat(f.file_name)}),f.size_kb&&(0,o.jsx)(p.x,{c:v.colors.waLight[8],style:{fontSize:"12px",fontWeight:"500",wordBreak:"break-all"},children:"File Size:   ".concat((0,W.z1)(f.size_kb,1))}),(0,o.jsx)(p.x,{c:v.colors.waLight[8],style:{fontSize:"12px",fontWeight:"500",wordBreak:"break-all"},children:"Local Path:   ".concat(f.local_path)})]}),(0,W.uZ)(f)&&(0,o.jsx)(L(),{href:(0,W.uZ)(f),target:"_blank",onClick:e=>e.stopPropagation(),children:(0,o.jsxs)(i.Z,{gap:5,my:5,children:[(0,o.jsx)(z.E,{h:16,src:"/images/civitai-icon.png",w:16}),(0,o.jsx)(p.x,{span:!0,c:v.colors.waDark[8],style:{fontSize:"12px",fontWeight:"500"},children:"Civitai URL"})]})}),(0,o.jsx)(l.M,{style:{position:"absolute",top:"0px",right:"0px"},children:(0,o.jsx)(h.Z,{style:{color:"var(--mantine-color-waLight-9)",cursor:"pointer",height:"20px",width:"20px",strokeWidth:"1px"},onClick:e=>{e.stopPropagation(),w()}})})]})})]})}var R=n(5086),D=n(5310);function P(e){let{drawerOpened:t,closeDrawer:n,modelType:l,onModelSelected:a,models:s,refreshModels:c}=e,d=(0,r.rZ)(),h=(0,D.g_)().drawerOpened?"calc(100vw - ".concat(w.dk,"px - ").concat(w.xA,"px"):"calc(100vw - ".concat(w.dk,"px");return(0,o.jsx)(y.d,{lockScroll:!1,zIndex:100,opened:t,position:"bottom",onClose:()=>{},withOverlay:!1,shadow:"lg",size:"".concat(w.qZ,"px"),withCloseButton:!1,transitionProps:{duration:300,timingFunction:"const"},styles:{inner:{marginLeft:"".concat(w.dk,"px"),marginRight:"300px"},content:{backgroundColor:"var(--mantine-color-waLight-1)"},body:{padding:"0px"}},children:(0,o.jsxs)(u.K,{gap:0,w:h,children:[(0,o.jsxs)(i.Z,{h:44,px:20,bg:d.colors.waLight[2],justify:"space-between",children:[(0,o.jsxs)(i.Z,{children:[(0,o.jsx)(p.x,{h:30,mr:10,style:{lineHeight:"30px",userSelect:"none"},children:"Select ".concat(l)}),(0,o.jsx)(S,{onClick:()=>{c()}})]}),(0,o.jsx)(_,{onClick:()=>n()})]}),(0,o.jsx)(m.x,{h:w.qZ-44,w:h,children:(0,o.jsx)(i.Z,{mx:20,pt:20,pb:50,children:s&&s.map(e=>(0,o.jsx)(K,{model:e,onClick:()=>{a(e)}},e.local_path))})})]})})}function K(e){var t;let{model:n,onClick:i}=e,a=(0,r.rZ)(),[s,c]=(0,d.useState)(!1),[h,x]=(0,d.useState)(!1);return(0,o.jsx)(u.K,{justify:"center",align:"center",w:160,style:{cursor:"pointer"},onClick:i,children:(0,o.jsx)(I,{model:n,opened:s,close:()=>c(!1),children:(0,o.jsxs)(u.K,{children:[(0,o.jsxs)(l.M,{w:140,h:210,pos:"relative",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:[(0,o.jsx)(Z.b,{localPath:null!==(t=n.image_path)&&void 0!==t?t:"",width:140,height:210}),h&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(R.Z,{style:{position:"absolute",left:"5px",top:"5px",color:"var(--mantine-color-primary-1)",cursor:"pointer",height:"22px",width:"22px",strokeWidth:"1px",zIndex:401},onClick:e=>{e.stopPropagation(),c(!s)}}),(0,o.jsx)(v.a,{color:a.colors.waLight[0],backgroundOpacity:.7,radius:5,children:(0,o.jsx)(l.M,{w:"100%",h:"100%",children:(0,o.jsx)(p.x,{w:80,h:24,c:a.colors.waLight[5],bg:a.colors.waDark[5],style:{lineHeight:"24px",borderRadius:"5px",fontSize:"12px",opacity:.7,fontWeight:500,textAlign:"center"},children:"Select"})})})]})]}),(0,o.jsx)(p.x,{lineClamp:2,h:40,style:{fontSize:"12px",fontWeight:"500",wordBreak:"break-all"},children:"".concat((0,W.eK)(n))})]})})})}let F=(0,d.createContext)(null),E=()=>{let e=(0,d.useContext)(F);if(!e)throw Error("Missing ModelSelectionDrawerContext.Provider in the tree.");return e};function O(e){let{children:t}=e,[n,r]=(0,d.useState)(!1),[i,l]=(0,d.useState)(""),[a,s]=(0,d.useState)(""),[c,h]=(0,d.useState)(""),[u,p]=(0,d.useState)(()=>e=>{}),[g,m]=(0,d.useState)([]),f=(e,t,n)=>{s(e),h(t),l(n)},j=e=>{e&&(0,x.h1)(e).then(e=>{m(e)}).catch(e=>{console.error("loadModels error: "+e)})};return(0,d.useEffect)(()=>{j(c)},[c]),(0,o.jsxs)(F.Provider,{value:{drawerOpened:n,setDrawerOpened:r,setCardContext:f,toggleDrawer:(e,t,o,i)=>{a==e&&n?(f("","",""),p(()=>()=>{}),r(!1)):(f(e,t,o),p(()=>e=>i(e)),r(!0))},displayName:a},children:[t,(0,o.jsx)(P,{drawerOpened:n,closeDrawer:()=>r(!1),modelType:a,onModelSelected:e=>{u&&u(e)},models:g,refreshModels:()=>console.log("refreshModels")})]})}function A(e){let{text:t}=e,n=(0,r.rZ)();return(0,o.jsx)(p.x,{w:"100%",c:n.colors.waDark[3],style:{textAlign:"center",fontSize:"14px",fontWeight:300,height:"40px",lineHeight:"40px",backgroundColor:"var(--mantine-color-waLight-4)",position:"sticky",top:"0px",zIndex:420},children:t})}var N=n(5079),J=n(9913),T=n(2033),V=n(5844),B=n(3688),G=n(1314);function X(e){let{onClick:t,disabled:n=!1}=e,i=(0,r.rZ)();return(0,o.jsx)(G.Z,{color:n?i.colors.waDark[9]:i.colors.primary[3],style:{cursor:"pointer",height:"22px",width:"22px",strokeWidth:"1px"},onClick:e=>{e.stopPropagation(),t()}})}var q=n(2067);function H(e){let{onClick:t,disabled:n=!1}=e,i=(0,r.rZ)();return(0,o.jsx)(q.Z,{color:n?i.colors.waDark[9]:i.colors.primary[3],style:{cursor:"pointer",height:"22px",width:"22px",strokeWidth:"1px"},onClick:e=>{e.stopPropagation(),t()}})}function U(e){let{text:t}=e;return(0,o.jsx)(p.x,{style:{marginLeft:"6px",fontSize:"12px",fontWeight:600,color:"var(--mantine-color-waDark-7)",userSelect:"none",minWidth:"80px",maxWidth:"160px"},lineClamp:1,children:t})}var Y=n(1806);function Q(e){let{text:t,defaultValue:n,onChange:l,step:a=1,max:s=100,min:c=0,width:h="100%",height:x=38}=e,u=(0,r.rZ)(),[g,m]=(0,d.useState)(n),[w,y]=(0,d.useState)(g),[v,b]=(0,d.useState)(!1),k=(0,V.O)(()=>b(!1)),C=e=>{l&&l(e)},S=()=>{b(!1),isNaN(w)?C(n):C(Math.min(s,Math.max(c,w)))};return(0,o.jsx)(i.Z,{justify:"center",style:{borderRadius:"".concat(x,"px"),cursor:"pointer"},bg:u.colors.waLight[3],px:10,w:h,miw:220,h:x,children:(0,o.jsxs)(j.J,{opened:v,trapFocus:!0,position:"bottom",shadow:"md",children:[(0,o.jsx)(j.J.Target,{children:(0,o.jsx)(i.Z,{flex:1,h:x,style:{borderRadius:"30px",cursor:"pointer"},justify:"space-between",onClick:()=>b(!0),children:(0,o.jsxs)(J.k,{justify:"space-between",align:"center",w:"100%",children:[(0,o.jsx)(U,{text:t}),(0,o.jsxs)(J.k,{flex:1,w:"100%",justify:"space-between",ml:10,children:[(0,o.jsx)(X,{onClick:()=>{m(e=>{let n=e-a,o=Math.max(n,c);return n<c&&(0,Y.zn)({title:"Reach the minimum value",message:"Value of ".concat(t,": ").concat(o," has reached the minimum.")}),C(o),o})},disabled:g<=c}),(0,o.jsx)(p.x,{style:{fontSize:"14px",fontWeight:500,color:"var(--mantine-color-waDark-6)",userSelect:"none",textAlign:"center"},children:g}),(0,o.jsx)(H,{onClick:()=>{m(e=>{let n=e+a,o=Math.min(n,s);return n>s&&(0,Y.zn)({title:"Reach the maximum value",message:"Value of ".concat(t,": ").concat(o," has reached the maximum.")}),C(o),o})},disabled:g>=s})]})]})})}),(0,o.jsx)(j.J.Dropdown,{children:(0,o.jsxs)(i.Z,{ref:k,onKeyDown:(0,B.yr)([["Enter",S]]),children:[(0,o.jsx)(T.o,{flex:1,placeholder:"Value",size:"xs",value:w,onChange:e=>{y(parseInt(e.target.value))}}),(0,o.jsx)(f.z,{h:30,m:0,onClick:S,children:"Ok"})]})})]})})}function $(e){let{text:t,defaultValue:n,onChange:l,step:a=1,max:s=100,min:c=0,round:h=2,width:x="100%",height:u=38}=e,g=e=>{l&&l(parseFloat(e))},m=(0,r.rZ)(),[w,y]=(0,d.useState)(n.toFixed(h)),[v,b]=(0,d.useState)(w),[k,C]=(0,d.useState)(!1),S=(0,V.O)(()=>C(!1)),_=()=>{C(!1);let e=parseFloat(v);if(isNaN(e))y(""+n),g(w);else{let t=Math.min(s,Math.max(c,e)).toFixed(h);y(t),g(t)}};return(0,o.jsx)(i.Z,{justify:"center",style:{borderRadius:"".concat(u,"px"),cursor:"pointer"},bg:m.colors.waLight[3],px:10,w:x,miw:220,h:u,children:(0,o.jsxs)(j.J,{opened:k,trapFocus:!0,position:"bottom",shadow:"md",children:[(0,o.jsx)(j.J.Target,{children:(0,o.jsx)(i.Z,{flex:1,h:u,style:{borderRadius:"30px",cursor:"pointer"},justify:"space-between",onClick:()=>C(!0),children:(0,o.jsxs)(J.k,{justify:"space-between",align:"center",w:"100%",children:[(0,o.jsx)(U,{text:t}),(0,o.jsxs)(J.k,{justify:"space-between",align:"center",w:"100%",ml:10,flex:1,children:[(0,o.jsx)(X,{onClick:()=>{y(e=>{let n=Math.max(parseFloat(e)-a,c).toFixed(h);return n==c.toFixed(h)&&(0,Y.zn)({title:"Reach the minimum value",message:"Value of ".concat(t,": ").concat(n," has reached the minimum.")}),g(n),n})},disabled:parseFloat(w)<=c}),(0,o.jsx)(p.x,{style:{fontSize:"14px",fontWeight:500,color:"var(--mantine-color-waDark-6)",userSelect:"none",textAlign:"center"},children:w}),(0,o.jsx)(H,{onClick:()=>{y(e=>{let n=Math.min(parseFloat(e)+a,s).toFixed(h);return n==s.toFixed(h)&&(0,Y.zn)({title:"Reach the maximum value",message:"Value of ".concat(t,": ").concat(n," has reached the maximum.")}),g(n),n})},disabled:parseFloat(w)>=s})]})]})})}),(0,o.jsx)(j.J.Dropdown,{children:(0,o.jsxs)(i.Z,{ref:S,onKeyDown:(0,B.yr)([["Enter",_]]),children:[(0,o.jsx)(T.o,{flex:1,placeholder:"Value",size:"xs",value:v,onChange:e=>{b(e.target.value)}}),(0,o.jsx)(f.z,{h:30,m:0,onClick:_,children:"Ok"})]})})]})})}var ee=n(1401);function et(e){let{text:t,values:n,onChange:r,defaultValue:l="euler",width:a="100%",height:s=36}=e,[c,h]=(0,d.useState)(l);return(0,d.useEffect)(()=>{h(l)},[l]),(0,o.jsxs)(i.Z,{justify:"center",w:a,pl:10,style:{borderRadius:20,border:"1px solid var(--mantine-color-waLight-3)",backgroundColor:"var(--mantine-color-waLight-3)"},children:[(0,o.jsx)(U,{text:t}),(0,o.jsx)(ee.P,{value:c,flex:1,data:n,searchable:!0,styles:{dropdown:{borderRadius:"5px"},input:{height:"".concat(s,"px"),border:"none",textAlign:"center",backgroundColor:"var(--mantine-color-waLight-4)"}},rightSectionProps:{color:"var(--mantine-color-primary-9)"},defaultValue:l,onChange:(e,t)=>{r&&r(null!=e?e:""),h(null!=e?e:"")}})]})}var en=n(5263);let eo=(0,d.createContext)(null),er=()=>{let e=(0,d.useContext)(eo);if(!e)throw Error("Missing CardContext.Provider in the tree.");return e};function ei(e){let{children:t}=e,n={},[r,i]=(0,d.useState)("");return(0,o.jsx)(eo.Provider,{value:{cardName:r,setCardName:i,onGenerate:()=>{for(let e in n)n[e]()},registerOnGenerateCallback:(e,t)=>{n[t]=e}},children:t})}function el(e){let{onChange:t,defaultValue:n=null,text:l="Seed",max:a=72057594037927940,min:s=0,width:c="100%",height:h=38}=e,x=(0,r.rZ)(),u=er(),g=(0,d.useCallback)(()=>{let e=()=>{let e=Math.max(8,Math.ceil(Math.random()*(a.toString().length+1))),t=0;for(let n=1;n<=e;n++)t+=Math.floor(Math.pow(10,n)*Math.random());return t},t=e();for(;t<s||t>a;)t=e();return t},[]),[m,w]=(0,d.useState)(null!=n?n:g()),[y,v]=(0,d.useState)(m),[b,k]=(0,d.useState)(!1),C=(0,V.O)(()=>k(!1));(0,d.useEffect)(()=>{u.registerOnGenerateCallback(()=>{let e=g();w(e),S(e)},"Seed")},[]);let S=e=>{t&&t(e)},_=()=>{if(k(!1),isNaN(y))w(null!=n?n:g()),S(null!=n?n:g());else{let e=Math.min(a,Math.max(s,y));w(e),S(e)}};return(0,o.jsx)(i.Z,{justify:"center",style:{borderRadius:"".concat(h,"px"),cursor:"pointer"},bg:x.colors.waLight[3],px:10,w:c,miw:220,h:h,children:(0,o.jsxs)(j.J,{opened:b,trapFocus:!0,position:"bottom",shadow:"md",children:[(0,o.jsx)(j.J.Target,{children:(0,o.jsx)(i.Z,{flex:1,h:h,style:{borderRadius:"30px",cursor:"pointer"},justify:"space-between",onClick:()=>k(!0),children:(0,o.jsxs)(J.k,{justify:"space-between",align:"center",w:"100%",children:[(0,o.jsx)(U,{text:l}),(0,o.jsx)(p.x,{style:{marginLeft:"30px",fontSize:"14px",fontWeight:500,color:"var(--mantine-color-waDark-6)",userSelect:"none",textAlign:"center"},children:m}),(0,o.jsx)(en.Z,{style:{color:"var(--mantine-color-primary-3)",cursor:"pointer",height:"22px",width:"22px",strokeWidth:"1px"},onClick:e=>{e.stopPropagation();let t=g();w(t),S(t)}})]})})}),(0,o.jsx)(j.J.Dropdown,{children:(0,o.jsxs)(i.Z,{ref:C,onKeyDown:(0,B.yr)([["Enter",_]]),children:[(0,o.jsx)(T.o,{flex:1,placeholder:"Value",size:"xs",value:y,onChange:e=>{v(parseInt(e.target.value))}}),(0,o.jsx)(f.z,{h:30,m:0,onClick:_,children:"Ok"})]})})]})})}var ea=n(8090),es=n(4046);function ec(e){let{text:t}=e,n=(0,r.rZ)();return(0,o.jsx)(es.D,{order:5,mt:10,h:20,c:n.colors.waDark[9],mx:15,style:{textAlign:"start",userSelect:"none",lineHeight:"20px",fontSize:"14px",fontWeight:"400"},children:t})}function ed(e){let{text:t,defaultValue:n,onChange:i,width:l="100%"}=e,a=(0,r.rZ)(),[s,c]=(0,d.useState)(n);return(0,d.useEffect)(()=>{c(n)},[n]),(0,o.jsxs)(u.K,{justify:"start",style:{borderRadius:"10px",cursor:"pointer"},w:l,miw:220,bg:a.colors.waLight[3],children:[(0,o.jsx)(ec,{text:t}),(0,o.jsx)(ea.g,{autosize:!0,radius:"sm",value:s,minRows:3,maxRows:8,mb:15,mx:10,onChange:e=>{let t=e.target.value;c(t),i&&i(t)},placeholder:"Enter ".concat(t.toLowerCase()," here.")})]})}function eh(e){var t,n,a;let{text:s,defaultModel:c=null,funcName:h="",paramName:x="",width:g="100%",optional:m=!1,onChange:j,positionIndex:w=null}=e,y=(0,r.rZ)(),[v,b]=(0,d.useState)(!1),[k,C]=(0,d.useState)(!1),S=w?"".concat(s," - ").concat(w):s,[z,M]=(0,d.useState)(c),L=E(),D=()=>{L.toggleDrawer(S,h,x,e=>{M(e),j&&j(e)})},P=L.drawerOpened&&L.displayName===S;return(0,o.jsxs)(u.K,{justify:"start",style:{borderRadius:"10px",cursor:"pointer",position:"relative",border:P?"0.5px solid var(--mantine-color-primary-5)":"none"},w:g,miw:220,mih:170,bg:y.colors.waLight[3],children:[(0,o.jsx)(ec,{text:s}),z?(0,o.jsx)(I,{model:z,opened:k,close:()=>C(!1),children:(0,o.jsxs)(i.Z,{mb:10,mx:20,children:[(0,o.jsxs)(u.K,{style:{position:"relative"},onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:[(0,o.jsx)(Z.b,{localPath:null!==(n=z.image_path)&&void 0!==n?n:"",width:70,height:105},s),v&&(0,o.jsx)(R.Z,{style:{position:"absolute",left:"2px",top:"2px",color:"var(--mantine-color-primary-3)",cursor:"pointer",height:"18px",width:"18px",strokeWidth:"1px",zIndex:401},onClick:e=>{e.stopPropagation(),C(!k)}})]}),(0,o.jsxs)(u.K,{flex:1,h:"100%",justify:"start",gap:10,children:[(0,o.jsx)(p.x,{lineClamp:2,style:{fontSize:"12px",fontWeight:"500",wordBreak:"break-all"},children:"".concat((0,W.eK)(z))}),(0,o.jsx)(p.x,{c:y.colors.waLight[8],style:{fontSize:"12px",fontWeight:"500"},children:"Base Model:   ".concat(null!==(a=null===(t=z.civit_model)||void 0===t?void 0:t.baseModel)&&void 0!==a?a:" - ")}),(0,o.jsx)(f.z,{onClick:()=>D(),style:{fontWeight:600,fontSize:12,backgroundColor:"var(--mantine-color-waLight-4)",color:"var(--mantine-color-primary-3)"},w:100,h:26,children:"Select"})]})]})}):(0,o.jsx)(l.M,{mb:20,flex:1,w:"100%",children:(0,o.jsx)(f.z,{onClick:()=>{D()},style:{fontWeight:600,fontSize:12,backgroundColor:"var(--mantine-color-waLight-4)",color:"var(--mantine-color-phOrange-1)"},h:26,children:"Select ".concat(s)})}),m&&z&&(0,o.jsx)(l.M,{style:{position:"absolute",top:"15px",right:"15px"},children:(0,o.jsx)(_,{width:20,height:20,onClick:()=>{M(null),j&&j(null)}})})]})}var ex=n(4310);function eu(e){let{children:t,mediaType:n,subKey:l="",opened:a,width:s=500,onMediaSelected:c,close:h}=e,g=(0,r.rZ)(),[f,w]=(0,d.useState)([]),y=()=>{(0,x._W)(n,l).then(e=>w(e)).catch(e=>{console.log(e)})};return(0,d.useEffect)(()=>{y()},[]),(0,o.jsxs)(j.J,{shadow:"md",radius:"sm",position:"right",opened:a&&f.length>0,zIndex:490,children:[(0,o.jsx)(j.J.Target,{children:t}),(0,o.jsx)(j.J.Dropdown,{p:0,children:(0,o.jsxs)(u.K,{gap:0,children:[(0,o.jsx)(i.Z,{h:44,w:"100%",px:20,bg:g.colors.waLight[2],justify:"space-between",children:(0,o.jsxs)(i.Z,{w:"100%",justify:"space-between",children:[(0,o.jsxs)(i.Z,{gap:10,children:[(0,o.jsx)(p.x,{h:20,style:{lineHeight:"20px",fontSize:"14px",fontWeight:300},children:"Select from recently used"}),(0,o.jsx)(S,{width:20,height:20,onClick:()=>{y()},text:"Refresh images"})]}),(0,o.jsx)(_,{onClick:()=>h()})]})}),(0,o.jsx)(m.x,{h:400,w:s,children:(0,o.jsx)(i.Z,{mx:20,pt:20,pb:50,children:f&&f.map(e=>(0,o.jsx)(ep,{media:e,onClick:e=>{c(e)}},e.file_path))})})]})})]})}function ep(e){var t;let{media:n,onClick:i}=e,a=(0,r.rZ)();return(0,o.jsx)(l.M,{bg:a.colors.waLight[3],style:{cursor:"pointer"},onClick:e=>{e.stopPropagation(),i(n)},children:(0,o.jsx)(Z.b,{localPath:null!==(t=n.file_path)&&void 0!==t?t:"",width:70,height:105,objectFit:"contain"})})}var eg=n(4043);function em(e){let{onChange:t,text:n="Select Image",title:a="Select Image",width:s="100%",defaultImage:c=null,ruSubKey:h=""}=e,p=(0,r.rZ)(),g=(0,d.useRef)(null),[m,j]=(0,d.useState)(c),[w,y]=(0,d.useState)(!1),v=e=>{(0,x.BZ)("image",h,e).then(e=>{}).catch(e=>{console.log(e)})};return(0,o.jsxs)(u.K,{w:s,bg:p.colors.waLight[3],style:{borderRadius:"10px"},children:[(0,o.jsxs)(i.Z,{justify:"space-between",align:"center",children:[(0,o.jsx)(ec,{text:n}),(0,o.jsx)(l.M,{mr:10,mt:10,children:(0,o.jsx)(eg.Z,{style:{color:"var(--mantine-color-primary-3)",cursor:"pointer",height:"22px",width:"22px",strokeWidth:"1px"},onClick:e=>y(!0)})})]}),(0,o.jsxs)(u.K,{align:"center",children:[(0,o.jsx)(eu,{mediaType:"image",opened:w,subKey:h,onMediaSelected:e=>{j(e.file_path),t(e.file_path),v(e.file_path)},close:()=>y(!1),children:(0,o.jsxs)(l.M,{h:210,w:150,bg:p.colors.waLight[2],style:{borderRadius:"5px",position:"relative",cursor:"pointer"},children:[m&&(0,o.jsx)(Z.b,{localPath:m,width:150,height:210,objectFit:"contain"},n),m&&(0,o.jsx)(l.M,{style:{position:"absolute",right:"-6px",top:"-6px",background:"var(--mantine-color-waDark-1)",borderRadius:"10px",opacity:.3},children:(0,o.jsx)(_,{width:14,height:14,onClick:()=>{j(null),t(null)}})}),(0,o.jsx)(l.M,{hidden:!0,style:{position:"absolute",fontSize:"10px",bottom:"0px",left:"0px",width:"100%",height:"50px"},children:(0,o.jsx)(f.z,{hidden:!0,w:100,h:25,opacity:.6,onClick:e=>{var t;return null===(t=g.current)||void 0===t?void 0:t.click()},style:{fontSize:"10px"},children:a})})]})}),(0,o.jsx)(l.M,{hidden:!0,h:0,w:0,style:{overflow:"hidden"},children:(0,o.jsx)(ex.S,{ref:g,accept:"image/*",onChange:e=>{var n,o;j(null!==(n=null==e?void 0:e.path)&&void 0!==n?n:null),t(null!==(o=null==e?void 0:e.path)&&void 0!==o?o:null),(null==e?void 0:e.path)&&v(e.path)}})})]})]})}let ef={IntWidget:Q,FloatWidget:$,ComboWidget:et,SeedWidget:el,TextWidget:ed,ModelComboWidget:eh,ImageWidget:em};function ej(e){let{widgets:t,onChange:n,width:r=400,height:i=38,positionIndex:l}=e,[a,s]=(0,d.useState)(t);return(0,o.jsx)(u.K,{align:"center",justify:"space-between",gap:"md",w:r,children:t.map((e,t)=>{var r;let{Widget:c,params:h,key:x}=null!==(r=function(e){if(!e)return null;let t=ef[e.widget_type];if(!t)return null;let n={};switch(t){case Q:n={text:e.display_name,defaultValue:e.value,step:e.step,max:e.max,min:e.min};break;case $:n={text:e.display_name,defaultValue:e.value,step:e.step,max:e.max,min:e.min,round:e.round};break;case et:n={text:e.display_name,defaultValue:e.value,values:e.values};break;case el:n={text:e.display_name,defaultValue:e.value,max:e.max};break;case ed:n={text:e.display_name,defaultValue:e.value};break;case eh:n={text:e.display_name,defaultModel:e.value,funcName:e.values_function_name,paramName:e.param_name,optional:e.optional};break;case em:n={text:e.display_name,defaultImage:e.value};break;default:n={}}return{key:e.param_name,widgetType:e.widget_type,Widget:t,params:n,widgetInfo:e}}(e))&&void 0!==r?r:{};return(h.paramName=x,c)?(0,d.createElement)(c,{...h,key:x,onChange:e=>{let o=[...a];o[t]={...a[t],value:e},s(o),n(o)},height:i,positionIndex:l}):(0,o.jsx)(o.Fragment,{})})})}var ew=n(2579);function ey(e){let{cardInfo:t,addonIndex:n,onAddonChanged:i,closeAddon:a}=e,s=(0,r.rZ)(),[c,h]=(0,d.useState)(null);(0,d.useEffect)(()=>{let e=t.card_name;(0,x.nX)(e).then(e=>{let t=e.cardInfo;t&&h(t.addons[n])})},[t]);let g=(0,d.useCallback)(e=>{let o={...t},r=[...o.addons];r[n]=e,o.addons=r,(0,x.WX)(t.card_name,o).then(e=>{}),i(e)},[t]);return(0,o.jsx)(o.Fragment,{children:c&&(0,o.jsxs)(u.K,{align:"center",children:[(0,o.jsx)(A,{text:c.display_name}),c.can_turn_off&&(0,o.jsx)(N.A,{checked:!c.is_off,onChange:()=>{let e={...c};e.is_off=!e.is_off,h(e),g(e)},children:c.is_off?"Turn ".concat(c.addon_name," On"):"Turn ".concat(c.addon_name," Off")},c.addon_name),(0,o.jsxs)(u.K,{children:[c.widgets.map((e,t)=>(0,o.jsx)(u.K,{bg:s.colors.waLight[2],w:360,px:15,py:20,gap:5,style:{borderRadius:"5px",position:"relative"},align:"center",children:(0,o.jsx)(ej,{positionIndex:t,width:320,widgets:e,onChange:e=>{let n={...c};n.widgets=[...n.widgets],n.widgets[t]=e,h(n),g(n)}},c.display_name)})),c.comp_list&&(0,o.jsx)(l.M,{mb:15,children:(0,o.jsx)(f.z,{hidden:!0,w:120,h:26,opacity:.6,onClick:()=>{let e={...c};e.widgets=[...c.widgets,c.comp_widgets],h(e),g(e)},style:{fontSize:"10px"},children:"Add ".concat(c.addon_name)})})]}),(0,o.jsxs)(l.M,{style:{position:"absolute",bottom:"10px",right:"10px",zIndex:450},onClick:e=>{e.stopPropagation();let t={...c};t.can_turn_off&&(t.is_off=!0),t.widgets=[t.comp_widgets],h(t),g(t),a()},children:[(0,o.jsx)(ew.Z,{style:{color:"var(--mantine-color-waLight-9)",cursor:"pointer",height:"14px",width:"14px",strokeWidth:"1px"}}),(0,o.jsx)(p.x,{style:{fontSize:"12px",fontWeight:"300",cursor:"pointer"},ml:5,children:"Reset"})]})]})})}function ev(e){let{cardInfo:t,addonIndex:n,closeAddon:r,onAddonChanged:i}=e,a=E().drawerOpened?"calc(100vh - ".concat(w.qZ+100,"px)"):"calc(100vh - 100px)";return(0,o.jsxs)(u.K,{style:{position:"relative"},children:[(0,o.jsx)(l.M,{style:{position:"absolute",top:"3px",right:"3px",zIndex:450},children:(0,o.jsx)(_,{onClick:r,width:20})}),(0,o.jsx)(m.x,{w:400,h:a,style:{transition:"height 0.3s ease"},scrollbars:"y",scrollbarSize:2,m:0,children:-1!==n&&(0,o.jsx)(ey,{cardInfo:t,addonIndex:n,onAddonChanged:i,closeAddon:r},n)})]})}function eb(e){let{addon:t,addonIndex:n,bg:i,selected:a,onClick:s}=e,c=(0,r.rZ)(),h=(0,d.useCallback)(()=>{if(t.can_turn_off)return t.is_off?0:1;let e=t.widgets,n=0;for(let t of e)x(t)&&(n+=1);return n},[t]),x=(0,d.useCallback)(e=>{let t=!0;for(let n of e)null===n.value&&(t=!1);return t},[]);return(0,o.jsxs)(u.K,{gap:2,style:{position:"relative"},children:[(0,o.jsx)(l.M,{h:30,style:{cursor:"pointer",userSelect:"none",border:a?"1px solid var(--mantine-color-waLight-8)":"none",backgroundColor:i},onClick:()=>s(n),children:(0,o.jsx)(p.x,{c:a?c.white:c.colors.waDark[0],style:{fontSize:"10px"},fw:a?500:400,children:t.display_name})},t.display_name),(0,o.jsx)(ek,{num:h()})]})}function ek(e){let{num:t}=e,n=(0,r.rZ)();return(0,o.jsx)(i.Z,{justify:"center",w:"100%",h:3,bg:n.colors.waLight[1],gap:5,px:5,children:Array.from({length:t},(e,t)=>(0,o.jsx)(eC,{},t))})}function eC(){let e=(0,r.rZ)();return(0,o.jsx)(l.M,{style:{borderRadius:"3px"},bg:e.colors.primary[3],flex:1,h:2})}function eS(e){let{cardInfo:t}=e,n=(0,r.rZ)(),i=E(),[l,a]=(0,d.useState)(t.addons),[s,c]=(0,d.useState)(-1),h=[n.colors.customBlue[0],n.colors.customPurple[0],n.colors.customGreen[0],n.colors.customYellow[0],n.colors.customPink[0]];return(0,o.jsxs)(j.J,{width:200,position:"right",opened:-1!=s,shadow:"md",children:[(0,o.jsx)(j.J.Target,{children:(0,o.jsx)(u.K,{w:60,mt:15,style:{position:"absolute",right:"0px",top:"40px"},gap:20,children:l.map((e,t)=>(0,o.jsx)(eb,{addon:e,addonIndex:t,bg:h[t%h.length],selected:s==t,onClick:e=>{e==s?(c(-1),i.setDrawerOpened(!1)):c(t)}},e.display_name))})}),(0,o.jsx)(j.J.Dropdown,{w:400,bg:n.colors.waLight[5],style:{position:"absolute",top:"40px",borderRadius:"5px",border:"none",padding:"0px"},children:(0,o.jsx)(ev,{cardInfo:t,addonIndex:s,closeAddon:()=>{c(-1),i.setDrawerOpened(!1)},onAddonChanged:e=>{let t=[...l];t[s]=e,a(t)}},s)})]})}var e_=n(1428);function eZ(e){let{cardInfo:t,onCardInfoChanged:n,onReset:a,width:s=470}=e,c=(0,r.rZ)(),h=E(),j=(0,e_.XS)(),y=er(),v=(0,D.g_)(),[b,k]=(0,d.useState)(!1),C=h.drawerOpened?"calc(100vh - ".concat(w.qZ,"px - 60px)"):"calc(100vh - 60px)",S=t.addons,_=S&&S.length>0;return(0,o.jsxs)(i.Z,{w:_?580:500,bg:c.colors.waLight[1],align:"start",m:0,style:{position:"relative"},children:[(0,o.jsxs)(u.K,{gap:0,w:"100%",bg:c.colors.waLight[1],style:{position:"sticky",top:"0px",zIndex:"400"},children:[(0,o.jsxs)(i.Z,{w:"100%",justify:"space-between",px:20,children:[(0,o.jsx)(p.x,{style:{textAlign:"center",lineHeight:"40px",height:"40px"},children:null==t?void 0:t.card_name}),(0,o.jsxs)(l.M,{style:{position:"absolute",bottom:"10px",right:"10px",zIndex:450},onClick:a,children:[(0,o.jsx)(ew.Z,{style:{color:"var(--mantine-color-waLight-9)",cursor:"pointer",height:"14px",width:"14px",strokeWidth:"1px"}}),(0,o.jsx)(p.x,{style:{fontSize:"12px",fontWeight:"300",cursor:"pointer"},ml:5,children:"Reset"})]})]}),(0,o.jsx)(g.i,{color:c.colors.waLight[3],m:0})]}),(0,o.jsx)(m.x,{w:s,h:C,style:{transition:"height 0.3s ease"},scrollbars:"y",scrollbarSize:2,ml:25,mr:20,pb:80,children:(0,o.jsx)(ej,{width:440,widgets:t.widgets,onChange:e=>{let o={...t};o.widgets=e,n(o)}})}),(0,o.jsx)(eS,{cardInfo:t}),(0,o.jsx)(l.M,{bg:c.colors.waLight[3],w:"100%",h:60,style:{position:"absolute",bottom:"0px",zIndex:"400"},children:(0,o.jsx)(f.z,{h:32,w:160,onClick:()=>{k(!0),(0,x.R_)(t.card_name,j.clientId).then(e=>{k(!0),e?v.startLoop():(0,Y.s9)({error:Error("Generate error"),reason:"Generate error"})}).catch(e=>{k(!0),(0,Y.s9)({error:Error(e),reason:e.toString()})}),y.onGenerate(),v.setDrawerOpened(!0)},children:"Generate"})})]})}function ez(){let e=(0,a.useRouter)(),t=(0,r.rZ)(),[n,s]=(0,d.useState)(null);(0,d.useEffect)(()=>{let{cardName:t}=e.query;!t||Array.isArray(t)||(0,x.nX)(t).then(e=>s(e.cardInfo))},[e.query]);let u=(0,d.useCallback)(e=>{n&&(0,x.WX)(n.card_name,e).then(e=>{})},[n]),p=(0,d.useCallback)(()=>{if(!n)return;let t=n.card_name;(0,x.WX)(t,{}).then(n=>{n&&(0,x.nX)(t).then(t=>{s(t.cardInfo),e.back()})})},[n]);return(0,o.jsx)(ei,{children:(0,o.jsxs)(O,{children:[(0,o.jsx)(c(),{children:(0,o.jsx)("title",{children:"Card: ".concat(null==n?void 0:n.card_name)})}),(0,o.jsxs)(i.Z,{justify:"space-between",align:"start",bg:t.colors.waLight[0],gap:0,m:0,style:{position:"relative"},children:[n&&(0,o.jsx)(eZ,{cardInfo:n,onCardInfoChanged:u,onReset:p}),(0,o.jsx)(l.M,{bg:t.colors.waLight[4],style:{width:"40px",height:"40px",borderRadius:"25px",cursor:"pointer",position:"absolute",left:"650px",top:"10px",zIndex:400},onClick:()=>{e.back()},children:(0,o.jsx)(h.Z,{})})]})]})})}},1806:function(e,t,n){"use strict";n.d(t,{s9:function(){return a},zn:function(){return s}});var o=n(4246),r=n(9867),i=n(8437),l=n(3988);function a(e){let{error:t,reason:n,title:l="Something went wrong, retry may help.",autoClose:a=3e3}=e,s=Array.isArray(t)?(0,o.jsx)("ul",{children:t.map((e,t)=>(0,o.jsx)("li",{children:e.message},t))}):null!=n?n:t.message;r.N9.show({icon:(0,o.jsx)(i.Z,{size:18}),color:"red",message:s,title:l,autoClose:a})}function s(e){let{message:t,title:n,autoClose:i=3e3}=e;(0,r.c0)({icon:(0,o.jsx)(l.Z,{size:18}),color:"orange",message:t,title:n,autoClose:i})}n(7378)}},function(e){e.O(0,[542,985,888,774,179],function(){return e(e.s=4459)}),_N_E=e.O()}]);